<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="tait.clarridge, Devops all day every day.">

        <link rel="alternate"  href="http://oldmantaiter.github.io/feeds/all.atom.xml" type="application/atom+xml" title="tait.clarridge Full Atom Feed"/>
        <link rel="alternate" href="http://oldmantaiter.github.io/feeds/all.rss.xml" type="application/rss+xml" title="tait.clarridge Full RSS Feed"/>

        <title>Rename KVM Virtual Machine with virsh // tait.clarridge // Devops all day every day.</title>

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.3.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.min.css">
    <link rel="stylesheet" href="/theme/css/pure.css">
    <link rel="stylesheet" href="/theme/css/pygments.css">
    <link rel="stylesheet" href="../../../theme/css/pygments.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fitvids/1.0.1/jquery.fitvids.min.js"></script>
    <script>
        $(document).ready(function(){
            $(".content").fitVids();
        });
    </script>
</head>

<body>
<div class="pure-g-r" id="layout">
    <div class="sidebar sidebar-article pure-u">
        <header class="header-article">
            <hgroup>
                <a href="../../../author/tait-clarridge.html" title="See posts by Tait Clarridge">
                    <img class="article-avatar" alt="Tait Clarridge" src="http://www.gravatar.com/avatar/217f896fda4adf7ab81c69df92169297">
                </a>
                <h2 class="article-info">Tait Clarridge</h2>
                <small class="about-author"></small>
                <h5>Published</h5>
                <p>Tue 11 January 2011</p>
                <a href="/">&larr;Home</a>
            </hgroup>
        </header>
    </div>
    <div class="pure-u">
        <div class="content">
            <section class="post">
                <header class="post-header">
                    <h1>Rename KVM Virtual Machine with virsh</h1>
                        <p class="post-meta">
                            // under                                 <a class="post-category" href="../../../tag/kvm.html">kvm</a>
                                <a class="post-category" href="../../../tag/virsh.html">virsh</a>
                        </p>
                </header>
            </section>
            <p>Decided to play around with virsh today to see if I could rename some VMs that changed their hostname and purpose. It's actually quite simple!</p>
<p>I am using Fedora 14 for this but I assume it will work for Ubuntu and CentOS as well.</p>
<p>You must have elevated privileges for this to work so either become root or use sudo.</p>
<p>Power off the virtual machine and export the machine's XML configuration file:</p>
<div class="highlight"><pre><span class="gp">[root@tclarrltp ~]#</span> virsh dumpxml name_of_vm &gt; name_of_vm.xml
</pre></div>
<p>Next, edit the XML file and change the name between the <strong>&lt;name&gt;&lt;/name&gt;</strong> tags (should be right near the top). As an added step you could also rename the disk file to reflect the change of the name and change the name of it in the <strong>&lt;devices&gt;</strong> section under <strong>&lt;source file='/path/to/name_of_vm.img'&gt;</strong>.</p>
<p>Save the XML file and undefine the old VM name with:</p>
<div class="highlight"><pre><span class="gp">[root@tclarrltp ~]#</span> virsh undefine name_of_vm
</pre></div>
<p>Now just import the edited XML file to define the VM:</p>
<div class="highlight"><pre><span class="gp">[root@tclarrltp ~]#</span> virsh define name_of_vm.xml
</pre></div>
<p>And that should be it! You can now start up your vm either in the Virtual Machine Manager or with virsh using:</p>
<div class="highlight"><pre><span class="gp">[root@tclarrltp ~]#</span> virsh start name_of_vm
</pre></div>
<p>Hope this was helpful!</p>

            <div class="hr"></div>
            <a href="#" class="go-top">Go Top</a>
<div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = "oldmantaiter"; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div><footer class="footer">
    <p>&copy; tait.clarridge &ndash;
        Built with <a href="https://github.com/PurePelicanTheme/pure">Pure Theme</a>
        for <a href="http://blog.getpelican.com/">Pelican</a>
    </p>
    <script type="text/javascript">$(".gist-file table tr td.line-numbers").remove();</script>
</footer>        </div>
    </div>
</div>
    <script>
        var $top = $('.go-top');

        // Show or hide the sticky footer button
        $(window).scroll(function() {
            if ($(this).scrollTop() > 200) {
                $top.fadeIn(200);
            } else {
                $top.fadeOut(200);
            }
        });

        // Animate the scroll to top
        $top.click(function(event) {
            event.preventDefault();
            $('html, body').animate({scrollTop: 0}, 300);
        })

        // Makes sure that the href="#" attached to the <a> elements
        // don't scroll you back up the page.
        $('body').on('click', 'a[href="#"]', function(event) {
            event.preventDefault();
        });
    </script>
    <script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
        try {
            var pageTracker = _gat._getTracker("UA-45723915-1");
            pageTracker._trackPageview();
            } catch(err) {}
    </script>
</body>
</html>